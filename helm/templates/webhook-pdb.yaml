{{- $values := include "cloudzero-agent.values" . | fromYaml -}}
{{ include "cloudzero-agent.generatePodDisruptionBudget" (dict
    "component" $values.components.webhookServer
    "name" (include "cloudzero-agent.insightsController.deploymentName" .)
    "matchLabels" (include "cloudzero-agent.insightsController.server.matchLabels" .)
    "replicas" ($values.insightsController.server.replicaCount | default $values.components.webhookServer.replicas)
    "root" .
  ) }}
